@inherits ComponentBase
@typeparam TData;
@using Microsoft.AspNetCore.Components.Web

<div class="select-main">
    <div class="select-display">
        <input type="text" class="form-control" @bind-value="_selectedItemText" readonly @onclick="BindContainerOptions" placeholder="Select an option" />
        <span class="select-button @(_showContainerOptions ? "open" : "")" @onclick="BindContainerOptions"></span>
    </div>
    @if (_showContainerOptions)
    {
        <div class="select-container p-1">
            <input type="text" class="select-search form-control w-100 mb-1" @bind-value="_searchText" @bind-value:event="oninput" />
            <ul class="select-container-options">
                @foreach (var item in Data)
                {
                    @if (!string.IsNullOrWhiteSpace(_searchText))
                    {
                        @if (GetText(item).Contains(_searchText))
                        {
                            <li class="select-option" @onclick="(()=> SelectItem(item))">@GetText(item)</li>
                        }
                    }
                    else
                    {
                        <li class="select-option" @onclick="(()=> SelectItem(item))">@GetText(item)</li>
                    }
                }
            </ul>
        </div>
    }
</div>
